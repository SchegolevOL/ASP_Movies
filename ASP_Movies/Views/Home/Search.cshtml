@{
	Layout = "_Layout";
	ViewData["Title"] = "Movies";
}
@using Microsoft.AspNetCore.Mvc.TagHelpers
@model ASP_Movies.ViewModels.SearchViewModel
<div>@Model.Response</div>
@if (!string.IsNullOrWhiteSpace(@Model.Title) && Model.Response.Equals("True"))
{
	<h1>Movies results by title: @Model.Title (Count : @Model.TotalResult)</h1>

	<p>@Model.TotalPage</p>
	<div class="container">
		<div class="row">
			
			@foreach (var item in @Model.Movies)
			{
				<div class="col">
					<partial name="_MovieCardPartial" model="@item"/>
				</div>
			}
			
		</div>
		<br />
		<hr />
		<nav aria-label="Page navigation example">
			<ul class="pagination">
				@if (Model.CurrentPage>1)
				{
					<li class="page-item">
					<a class="page-link" asp-controller="Home"
					   asp-action="Search"
					   asp-route-page="@(Model.CurrentPage - 1)"
					   asp-route-title="@Model.Title">Previous</a></li>
				}
				

				@for (int i = (Model.CurrentPage>5?Model.CurrentPage-4:1); i <= (Model.CurrentPage< Model.TotalPage-5?Model.CurrentPage+4:Model.TotalPage); i++)
				{
					<li class="page-item @(Model.CurrentPage == (i)? "active":"")">
						<a class="page-link"
						   asp-controller="Home"
						   asp-action="Search"
						   asp-route-page="@(i)"
						   asp-route-title="@Model.Title">
							@(i)
						</a>
					</li>
				}
				@if (@Model.CurrentPage<Model.TotalPage)
				{
<li class="page-item"><a class="page-link" 
				                         asp-controller="Home"
				                         asp-action="Search"
				                         asp-route-page="@(Model.CurrentPage + 1)"
				                         asp-route-title="@Model.Title">Next</a></li>
				}
				
			</ul>
		</nav>
	</div>

}
else
{
	<h3>No results!</h3>
}